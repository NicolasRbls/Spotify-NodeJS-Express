{% extends "base.twig" %}

{% block content %}
  <div class="content-container">
    <h1>{{ title }}</h1>

    <div class="form-container">
      <h2>Ajouter un morceau</h2>
      <form method="POST" action="/music/add" enctype="multipart/form-data">
        <div class="form-group">
          <input type="text" name="title" placeholder="Titre" required class="input">
        </div>
        <div class="form-group">
          <input type="text" name="artist" placeholder="Artiste" required class="input">
        </div>
        <div class="form-group">
          <input type="text" name="album" placeholder="Album" class="input">
        </div>
        <div class="form-group">
          <input type="file" name="file" accept=".mp3" required class="input">
        </div>
        <div class="form-group">
          <button type="submit" class="button primary">Ajouter</button>
        </div>
      </form>
    </div>

    <hr>

    <div class="form-container">
      <h2>Rechercher une musique sur YouTube</h2>
      <form id="youtube-search-form" action="/music/search" method="GET">
        <div class="form-group">
          <input type="text" name="query" placeholder="Recherche YouTube" required class="input">
        </div>
        <div class="form-group">
          <button type="submit" class="button primary">Rechercher</button>
        </div>
      </form>
    </div>

    {% if youtubeResults %}
    <div class="list-container">
      <h2>Résultats de recherche</h2>
      <ul class="track-list">
        {% for result in youtubeResults %}
          <li class="track-item">
            <strong>{{ result.title }}</strong>
            <a href="/music/download?videoId={{ result.videoId }}" class="button secondary">Télécharger</a>
          </li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}

    <hr>

    <div class="list-container">
      <h2>Liste des morceaux</h2>
      <ul class="track-list">
        {% for track in tracks %}
          <li class="track-item">
            <strong>{{ track.title }}</strong> - {{ track.artist }}
            <a href="/music/player/{{ track.id }}" class="button secondary">Écouter</a>
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>
{% endblock %}
